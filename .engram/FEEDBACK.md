# Honest Feedback Report: AI Agent Experience with Engram

*Generated by OpenCode Agent on 2026-01-21*

## Executive Summary

Engram is a distributed memory system for AI agents with ambitious goals but significant agent-hostile patterns. The project excels at documentation and workflow guidance but falls short in programmatic access and build stability.

---

## The Good

### 1. **JSON Output Support Exists**
- Commands support `--json` flag for programmatic access
- Consistent use of `serde_json::to_string_pretty()` for structured data
- Error handling uses structured `EngramError` enum with proper error types (Storage, Config, Validation, Git, Io, etc.)

### 2. **Comprehensive AI Agent Documentation**
The `AGENTS.md` file provides:
- **Session Startup Protocol**: Check engram availability, review tasks, check workflow status, review validation
- **Task Execution Workflow**: Detailed before/during/after procedures
- **Commit Validation Requirements**: Clear format `[uuid]` for task references
- **Planning and Task Creation**: Step-by-step entity structure creation
- **Troubleshooting Section**: Hook issues, missing relationships, storage issues

### 3. **Clear Core Workflow Guidance**
Core workflows are well-defined:
1. Workspace setup
2. Task creation (returns UUIDs)
3. Context creation
4. Reasoning creation
5. Relationship linking (REQUIRED for validation)
6. Validation hook installation

### 4. **Nix Build Configuration**
- Proper devShell with all required dependencies
- Clean separation between build and test targets
- OpenSSL properly configured for system libraries

### 5. **Relationship Graph Capabilities**
- Supports complex graph operations (BFS, DFS, Dijkstra)
- Multiple relationship types (DependsOn, Contains, References, Fulfills, etc.)
- Path finding and connection queries available

---

## The Bad

### 1. **Mixed Output Mode - No Clean JSON-Only**
Despite `--json` support, output is inconsistent:
- Many commands print human-readable text AND JSON mixed together
- Agents must parse through emoji markers and text to extract JSON
- No `--quiet` or `--machine` flag for pure JSON output

### 2. **Emoji-Based Output Indicators**
- Heavy reliance on visual indicators instead of structured exit codes
- `‚ùå` for errors, `‚úÖ` for success, `üöß` for unimplemented features
- These are not machine-parseable and break in non-UTF8 environments

### 3. **Complex Multi-Step Relationship Management**
- Tasks require BOTH context AND reasoning relationships for validation
- No batch relationship creation or automated linking
- Agents must manually track and link UUIDs across multiple commands

### 4. **Build Process Skips Tests**
- `flake.nix` explicitly sets `doCheck = false` due to compilation errors
- This prevents automated validation in CI/CD
- Agents cannot verify changes via `nix check`

### 5. **Timeout Issues with Build**
- `nix build` command can be slow and time out
- No caching mentioned for incremental builds

### 6. **Inconsistent Error Reporting**
- Some errors use emoji, others use plain text
- No standard error format across modules
- Makes programmatic error handling difficult

---

## The Ugly

### 1. **Massive Number of Unimplemented Features**
Found **39 occurrences** of "not yet implemented" or "planned feature":
- Execution history not yet implemented
- Dashboard visualization planned
- Workflow designer not implemented
- Perkeep integration requires server
- Branch merging not implemented for Git refs storage

### 2. **No Structured Exit Codes**
- Success/failure determined by looking at output text
- No standard exit codes for different error types
- Agents must parse stderr for `‚ùå` or `Error:` patterns

### 3. **UUID Extraction Burden on Agents**
- Every entity creation returns a UUID that must be captured from mixed text output
- No `--output-format=id-only` or `--quiet` option
- Agents must parse human-readable output to get IDs

### 4. **Manual Workflow State Management**
- Agents must manually update status, check relationships, verify workflow state
- No automated state checking or blocking enforcement

### 5. **Dual Repository Architecture Complexity**
- Engram entities stored in `.engram/.git` (separate from main repo)
- Main repository gitignored for `.engram/*`
- Adds cognitive load for understanding where data lives

### 6. **No Progress Feedback for Long Operations**
- Migration and sync commands show no incremental progress
- Agents cannot estimate completion time

### 7. **Missing `--dry-run` for Destructive Operations**
- Many destructive commands (delete, etc.) lack `--dry-run`
- Risk of data loss in automated scenarios

---

## Recommendations for AI Agent Friendliness

### High Priority:
1. Add `--machine` or `--json-only` flag for clean structured output
2. Implement standard exit codes (0=success, 1=error, 2=validation error, etc.)
3. Fix test compilation errors and enable `doCheck = true`
4. Add `--output-id-only` flag for entity creation commands

### Medium Priority:
5. Batch relationship creation: `engram relationship create --batch <file.json>`
6. Automated relationship linking: Create context/reasoning with auto-link to task
7. Progress bars for long operations with estimated time
8. Consistent error format across all modules

### Lower Priority:
9. Add `--dry-run` to all destructive operations
10. Unified repository view (merge .engram/.git and main repo conceptually)
11. Status summary command: `engram status --agent <name>` showing all pending work
